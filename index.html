<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Zodiac builder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
        :root {
            --top-initial: 100px;
            --top-final: 28px;
            --left-initial: 20px;
            --left-final: 100px;
        }
        
        body {
            background-color: white;
        }
        
        #box {
            position: relative;
            margin: auto;
            display: block;
            background: white;
            width: 250px;
            height: 250px;
            border: 1px solid black;
        }
        
        .circle {
            position: absolute;
            top: 150px;
            left: 20px;
            width: 80px;
            height: 80px;
            background-color: black;
            -webkit-clip-path: circle(50% at 50% 50%);
            clip-path: circle(50% at 50% 50%);
            padding-top: 0%;
            display: grid;
        }
        
        .bar {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: black;
            animation-duration: 3s;
            animation-name: fadeIn;
            animation-fill-mode: forwards;
        }
        
        .triangle {}
        
        .inner-circle {
            background-color: white;
            margin: auto;
            display: block;
            -webkit-clip-path: circle(50% at 50% 50%);
            clip-path: circle(50% at 50% 50%);
            animation-duration: 3s;
            animation-name: growInnerCircle;
            animation-fill-mode: forwards;
        }
        
        .mask {
            position: absolute;
            background-color: white;
            animation-duration: 3s;
            animation-name: fadeIn;
            animation-fill-mode: forwards;
        }
        
        .slide-vertical {
            animation-duration: 3s;
            animation-name: slideShapeVertical;
            animation-fill-mode: forwards;
        }
        
        .slide-horizontal {
            animation-duration: 3s;
            animation-name: slideShapeHorizontal;
            animation-fill-mode: forwards;
        }
        
        .rotate-ninety {
            animation-duration: 3s;
            animation-name: rotateNinetyClockwise;
            animation-fill-mode: forwards;
        }
        
        .not-rotated {
            -ms-transform: rotate(0deg);
            /* IE 9 */
            -webkit-transform: rotate(0deg);
            /* Safari */
            transform: rotate(0deg);
            /* Standard syntax */
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes growInnerCircle {
            from {
                width: 0%;
                height: 0%
            }
            to {
                width: 80%;
                height: 80%;
            }
        }
        
        @keyframes slideShapeVertical {
            from {
                top: var(--top-initial);
            }
            to {
                top: var(--top-final);
            }
        }
        
        @keyframes slideShapeHorizontal {
            from {
                left: var(--left-initial);
            }
            to {
                left: var(--left-final);
            }
        }
        
        @keyframes rotateNinetyClockwise {
            from {}
            to {
                -ms-transform: rotate(-90deg);
                /* IE 9 */
                -webkit-transform: rotate(-90deg);
                /* Safari */
                transform: rotate(-90deg);
                /* Standard syntax */
            }
        }

    </style>





</head>

<body>

    <!-- invisible box -->
    <div id=box>



        <div class="circle" onclick="taurus(this)"></div>


    </div>
    <!-- end invisible box -->



    <script type="application/javascript">
        
        
        const taurus = (elem) => {
            emptyOutCircle(elem);
            var topCircle = divideCellVertical(elem, -8)
            setTimeout(function() {
                maskPartOfCircle(topCircle, "top", 60);
            }, 3000);
        }


        const aries = (elem) => {

            var gap = 0;

            var invisibleBox = document.getElementById("box");

            emptyOutCircle(elem);
            var secondCircle = splitCellHorizontal(elem, 0);
        }

        function gemini(originalCircle) {

            var gapBetweenCircles = 35;

            emptyOutCircle(originalCircle);
            var topCircle = divideCellVertical(originalCircle, gapBetweenCircles);

            setTimeout(function() {
                maskPartOfCircle(topCircle, 'top', 70);
            }, 3000);

            setTimeout(function() {
                maskPartOfCircle(originalCircle, 'bottom', 70);
            }, 3000);

            setTimeout(function() {
                var bar1 = createBar(gapBetweenCircles * 1.4, "vertical");
                positionElement(bar1, getBottomDistance(topCircle) - 8, getLeftDistance(originalCircle) + getWidth(originalCircle) * 0.3);
                originalCircle.parentElement.appendChild(bar1);

                var bar2 = createBar(gapBetweenCircles * 1.4, "vertical");
                positionElement(bar2, getBottomDistance(topCircle) - 8, getLeftDistance(originalCircle) + getWidth(originalCircle) * 0.6);
                originalCircle.parentElement.appendChild(bar2);
            }, 6000);

        }



        function pisces(elem) {

            var gap = 20;

            var invisibleBox = document.getElementById("box");

            emptyOutCircle(elem);
            var topCircle = divideCellVertical(elem, gap)

            setTimeout(function() {
                maskPartOfCircle(topCircle, "top", 50);
            }, 3000);

            setTimeout(function() {
                maskPartOfCircle(elem, 'bottom', 50);
            }, 3000);

            setTimeout(function() {
                var crossBar = createBar(getWidth(elem) + gap, "vertical");
                var leftDistance = getLeftDistance(elem) + getWidth(elem) / 2 - 4;
                var topDistance = getTopDistance(elem) - getWidth(elem) / 2 - gap;
                positionElement(crossBar, topDistance, leftDistance);
                invisibleBox.appendChild(crossBar);
            }, 6000);

            setTimeout(function() {
                rotateElem(invisibleBox);
            }, 9000);
        }


        function rotateElem(elem) {

            elem.classList.add("rotate-ninety");


        }





        function emptyOutCircle(element) {

            var elem = element;
            var style = window.getComputedStyle(elem, null);

            //Get style values of the element (minus 'px');
            var elemWidth = parseInt(style.width.slice(0, -2));
            var elemHeight = parseInt(style.height.slice(0, -2));


            //Create new circle, add to parent
            var innerCircle = document.createElement('div');
            innerCircle.setAttribute("class", "inner-circle");
            elem.appendChild(innerCircle);
        }


        function maskPartOfCircle(element, side, percentToMask) {

            //Get dimensions and placement of object to mask
            var elemWidth = getWidth(element);
            var elemHeight = getHeight(element);
            var elemLeftValue = getLeftDistance(element);
            var elemTopValue = getTopDistance(element);

            //Create mask
            var mask = document.createElement('div');
            mask.setAttribute("class", "mask");

            //Mask either top or bottom 
            switch (side) {
                case ("top"):
                    mask.style.width = elemWidth + "px";
                    mask.style.top = elemTopValue + "px";
                    mask.style.left = elemLeftValue + "px";
                    mask.style.height = elemHeight * (percentToMask / 100) + "px";
                    break;
                case ("bottom"):
                    mask.style.width = elemWidth + "px";
                    mask.style.top = elemTopValue + (elemHeight * ((100 - percentToMask) / 100)) + "px";
                    mask.style.left = elemLeftValue + "px";
                    mask.style.height = elemHeight * (percentToMask / 100) + "px";
                    break;

                default:
                    console.log("Please enter top, bottom, left or right");

            }

            element.parentElement.appendChild(mask);
        }


        function createBar(size, orientation) {

            var crossBar = document.createElement("div");
            crossBar.classList.add('bar');

            if (orientation == "vertical") {
                crossBar.style.height = size + "px";
            } else if (orientation == "horizontal") {
                crossBar.style.width = +"px";
            } else {
                console.log("Please enter vertical or horizontal");
            }
            return crossBar;
        }

        function positionElement(element, top, left) {
            element.style.top = top + "px";
            element.style.left = left + "px";
        }


        const splitCellHorizontal = (elem, gap) => {

            var style = window.getComputedStyle(elem, null);
            var dupNode = elem.cloneNode(true);
            let root = document.documentElement;

            //Get style values of the element (minus 'px');
            var elemLeftValue = parseInt(style.left.slice(0, -2));
            var elemWidth = parseInt(style.width.slice(0, -2));

            dupNode.classList.add("slide-horizontal");
            root.style.setProperty('--left-initial', style.left);
            root.style.setProperty('--left-final', elemLeftValue + elemWidth + gap + "px");
            document.getElementById('box').appendChild(dupNode);
            return dupNode;
        }

        const divideCellVertical = (elem, gap) => {

            var style = window.getComputedStyle(elem, null);
            var dupNode = elem.cloneNode(true);
            let root = document.documentElement;

            //Get style values of the element (minus 'px');
            var elemTopValue = parseInt(style.top.slice(0, -2));
            var elemWidth = parseInt(style.width.slice(0, -2));

            dupNode.classList.add("slide-vertical");
            root.style.setProperty('--top-initial', elemTopValue + "px");
            root.style.setProperty('--top-final', elemTopValue - elemWidth - gap + "px");
            document.getElementById('box').appendChild(dupNode);
            return dupNode;
        }




        function getWidth(elem) {
            var style = window.getComputedStyle(elem, null);
            // Return pixel width of element as an integer, removing "px"
            return parseInt(style.width.slice(0, -2));
        }

        function getHeight(elem) {
            var style = window.getComputedStyle(elem, null);
            // Return pixel height of element as an integer, removing "px"
            return parseInt(style.height.slice(0, -2));
        }

        function getLeftDistance(elem) {
            var style = window.getComputedStyle(elem, null);
            // Return left value of element as an integer, removing "px"
            return parseInt(style.left.slice(0, -2));
        }

        function getTopDistance(elem) {
            var style = window.getComputedStyle(elem, null);
            // Return top Value of element as an integer, removing "px"
            return parseInt(style.top.slice(0, -2));
        }

        function getBottomDistance(elem) {
            var style = window.getComputedStyle(elem, null);
            var top = parseInt(style.top.slice(0, -2));
            return top + getHeight(elem);
        }

    </script>






</body>

</html>
