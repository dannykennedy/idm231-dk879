<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Zodiac builder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
        :root {
            --top-initial: 100px;
            --top-final: 28px;
        }
        
        body {
            background-color: white;
        }
        
        #box {
            position: relative;
            margin: auto;
            display: block;
            background: white;
            width: 250px;
            height: 250px;
            border: 1px solid black;
        }
        
        .circle {
            position: absolute;
            top: 150px;
            left: 20px;
            width: 80px;
            height: 80px;
            /*   height: 80px; */
            /*   width: 80px; */
            background-color: black;
            -webkit-clip-path: circle(50% at 50% 50%);
            clip-path: circle(50% at 50% 50%);
            padding-top: 0%;
            display: grid;
        }
        
        .inner-circle {
            background-color: white;
            margin: auto;
            display: block;
            -webkit-clip-path: circle(50% at 50% 50%);
            clip-path: circle(50% at 50% 50%);
            animation-duration: 3s;
            animation-name: growInnerCircle;
            animation-fill-mode: forwards;
        }
        
        .half-circle {
            position: absolute;
            animation-duration: 3s;
            animation-name: fadeIn;
            animation-fill-mode: forwards;
        }
        
        .slide-vertical {
            animation-duration: 3s;
            animation-name: slideShapeVertical;
            animation-fill-mode: forwards;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes growInnerCircle {
            from {
                width: 0%;
                height: 0%
            }
            to {
                width: 80%;
                height: 80%;
            }
        }
        
        @keyframes slideShapeVertical {
            from {
                top: var(--top-initial);
            }
            to {
                top: var(--top-final);
            }
        }

    </style>





</head>

<body>

    <!-- invisible box -->
    <div id=box>



        <div class="circle" onclick="gemini(this)"></div>


    </div>
    <!-- end invisible box -->



    <script type="application/javascript">
        function taurus(elem) {
            emptyCircle(elem);
            var topCircle = splitNode(elem, "up", -8);
            setTimeout(function() {
                halfCircle(topCircle);
            }, 3000);
        }

        function gemini(elem) {

            emptyCircle(elem);
            var topCircle = splitNode(elem, "up", 30);

            setTimeout(function() {
                halfCircle(topCircle, "top");
            }, 3000);

            setTimeout(function() {
                halfCircle(elem, 'bottom');
            }, 3000);
        }





        function emptyCircle(element) {

            var elem = element;
            var style = window.getComputedStyle(elem, null);

            //Get style values of the element (minus 'px');
            var elemWidth = parseInt(style.width.slice(0, -2));
            var elemHeight = parseInt(style.height.slice(0, -2));


            //Create new circle, add to parent
            var innerCircle = document.createElement('div');
            innerCircle.setAttribute("class", "inner-circle");
            elem.appendChild(innerCircle);
        }


        function halfCircle(element, side) {



            var style = window.getComputedStyle(element, null);

            //Get style values of the element (minus 'px');
            var elemWidth = parseInt(style.width.slice(0, -2));
            var elemHeight = parseInt(style.height.slice(0, -2));
            var elemLeftValue = parseInt(style.left.slice(0, -2));
            var elemTopValue = parseInt(style.top.slice(0, -2));

            console.log("elemtop" + elemTopValue);

            var halfCircle = document.createElement('div');


            switch (side) {
                case ("top"):
                    halfCircle.style.width = elemWidth + "px";
                    halfCircle.style.top = elemTopValue + "px";
                    halfCircle.style.left = elemLeftValue + "px";
                    halfCircle.style.height = elemHeight / 2 + "px";
                    break;
                case ("bottom"):
                    halfCircle.style.width = elemWidth + "px";
                    halfCircle.style.top = elemTopValue + (elemHeight / 2) + "px";
                    halfCircle.style.left = elemLeftValue + "px";
                    halfCircle.style.height = elemHeight / 2 + "px";
                    break;

                default:
                    console.log("Please enter top, bottom, left or right");

            }

            halfCircle.style.backgroundColor = "white";


            halfCircle.style.borderTopLeftRadius = elemHeight;
            halfCircle.style.borderTopRightRadius = elemHeight;

            halfCircle.setAttribute("class", "half-circle");

            //            
            //            
            //                      border-top-left-radius: $size * 2;
            //          border-top-right-radius: $size * 2;

            element.parentElement.appendChild(halfCircle);



        }


        function splitNode(element, direction, gap) {

            console.log('splitting node');

            var elem = element; //document.getElementsByClassName("circle")[0];
            var style = window.getComputedStyle(elem, null);
            //            var style = node.getComputedStyle();
            var dupNode = elem.cloneNode(true);

            //Get style values of the element (minus 'px');
            var elemLeftValue = parseInt(style.left.slice(0, -2));
            var elemTopValue = parseInt(style.top.slice(0, -2));
            var elemWidth = parseInt(style.width.slice(0, -2));
            var elemHeight = parseInt(style.height.slice(0, -2));


            dupNode.classList.add("slide-vertical");
            let root = document.documentElement;

            switch (direction) {
                case "up":
                    root.style.setProperty('--top-initial', elemTopValue + "px");
                    root.style.setProperty('--top-final', elemTopValue - elemWidth - gap + "px");
                    break;
                case "down":
                    root.style.setProperty('--top-initial', elemTopValue + "px");
                    root.style.setProperty('--top-final', elemTopValue + elemWidth + gap + "px");
                    break;
                case "left":
                    dupNode.style.left = elemLeftValue + elemWidth + "px";
                    break;
                case "right":
                    dupNode.style.left = elemLeftValue - elemWidth + "px";
                    break;
                default:
                    console.log("Please enter up, down, left or right");
            }

            //            dupNode.onclick = splitNode;

            document.getElementById('box').appendChild(dupNode);

            return dupNode;
        }

    </script>






</body>

</html>
